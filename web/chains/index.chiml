ins: state
out: response
do:

  - |request <-- state.request

  - |(request.auth) -> {$.print}

  - if: |'auth' in request && 'username' in request.auth
    do: |"Hello " + request.auth.username --> response.data.body
    else: |"Hello world :D" --> response.data.body

  - |"index.ejs" --> response.view
