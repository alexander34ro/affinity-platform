verbose: true
ins: webConfig
out: output
vars:

    # structure
    structure:
        structure:
            name: 'structure'
            table: 'cck_structure'
            script_preprocess_row: 'chains/cck.structure.preprocess.row.yaml'
            valid_fields:
                - 'name' # name of entity
                - 'table' # table name of entity
                - 'valid_fields' # list of valid fields
                - 'script_insert' # insert action (YAML script); input: webConfig, request, table, data; output: row
                - 'script_update' # update action (YAML script); input: webConfig, request, table, pk, data; output: row
                - 'script_delete' # delete action (YAML script); input: webConfig, request, table, pk; output: row
                - 'script_get' #  get action (YAML script); input: webConfig, request, table, query; output: rows
                - 'script_getOne' # getOne action (YAML script); input: webConfig, request, table, pk; output: row
                - 'script_preprocess_insert' # preprocess insert (YAML script); input: webConfig, request, table, data; output: data or boolean
                - 'script_preprocess_update' # preprocess update (YAML script); input: webConfig, request, table, data; output: data or boolean
                - 'script_preprocess_delete' # preprocess delete (YAML script); input: webConfig, request, table, data; output: data or boolean
                - 'script_preprocess_row' # preprocess row (YAML script); input: webConfig, request, row; output: row
                - 'presentations'

    # user
    user:
        structure:
            name: 'user'
            table: 'cms_user'
            script_preprocess_insert: 'chains/cck.user.preproecess.insert.yaml'
            valid_fields:
                - 'user_name'
                - 'hashed_password'
                - 'first_name'
                - 'last_name'
                - 'email_address'
                - 'groups'

        data:
            - _id: '1' 
              user_name: 'cms_system'

    # group structure
    group:
        structure:
            name: 'group'
            table: 'cms_group'
            valid_fields:
                - 'group_name'
                - 'description'
        data:
            - _id: '1'
              group_name: 'Super Admin of CMS'
            - _id: '2'
              group_name: 'Admin of CMS'

    # config
    config:
        structure:
            name: 'config'
            table: 'cms_config'
            valid_fields:
                - 'name'
                - 'value'
    route:
        structure:
            name: 'route'
            table: 'cms_route'
            valid_fields:
                - 'route'
                - 'chain'

parallel:
    - (webConfig, structure, '1') -> [../programs/cck.structure.js create] -> output.structure
    - (webConfig, user, '1') -> [../programs/cck.structure.js create] -> output.user
    - (webConfig, group, '1') -> [../programs/cck.structure.js create] -> output.group
    - (webConfig, config, '1') -> [../programs/cck.structure.js create] -> output.config
    - (webConfig, route, '1') -> [../programs/cck.structure.js create] -> output.route
